# Section 4.5: Reason Codes

> This section is part of [Section 4: Control Packet Format](./04.01-packet-structure.md).
> 
> - Previous: [Section 4.4: Properties](./04.04-properties.md)
> - Up: [Section 4: Control Packet Format](./04.01-packet-structure.md)

---

## 4.5.1 Overview

A Reason Code is a one-byte unsigned value that indicates the result of an operation. Reason Codes are a new feature in MQTT 5.0.

- Values less than 0x80 indicate successful completion of an operation
- Values 0x80 or greater indicate failure
- The normal Reason Code for success is 0 (0x00)

## 4.5.2 Packets with Reason Codes

| Packet | Location | Count |
|--------|----------|-------|
| CONNACK | Variable Header | Single |
| PUBACK | Variable Header | Single |
| PUBREC | Variable Header | Single |
| PUBREL | Variable Header | Single |
| PUBCOMP | Variable Header | Single |
| SUBACK | Payload | One per Topic Filter |
| UNSUBACK | Payload | One per Topic Filter |
| DISCONNECT | Variable Header | Single |
| AUTH | Variable Header | Single |

## 4.5.3 Reason Code Reference

### Table 4-9: All Reason Codes

| Dec | Hex | Name | Packets |
|-----|-----|------|---------|
| 0 | 0x00 | Success | CONNACK, PUBACK, PUBREC, PUBREL, PUBCOMP, UNSUBACK, AUTH |
| 0 | 0x00 | Normal disconnection | DISCONNECT |
| 0 | 0x00 | Granted QoS 0 | SUBACK |
| 1 | 0x01 | Granted QoS 1 | SUBACK |
| 2 | 0x02 | Granted QoS 2 | SUBACK |
| 4 | 0x04 | Disconnect with Will Message | DISCONNECT |
| 16 | 0x10 | No matching subscribers | PUBACK, PUBREC |
| 17 | 0x11 | No subscription existed | UNSUBACK |
| 24 | 0x18 | Continue authentication | AUTH |
| 25 | 0x19 | Re-authenticate | AUTH |
| 128 | 0x80 | Unspecified error | CONNACK, PUBACK, PUBREC, SUBACK, UNSUBACK, DISCONNECT |
| 129 | 0x81 | Malformed Packet | CONNACK, DISCONNECT |
| 130 | 0x82 | Protocol Error | CONNACK, DISCONNECT |
| 131 | 0x83 | Implementation specific error | CONNACK, PUBACK, PUBREC, SUBACK, UNSUBACK, DISCONNECT |
| 132 | 0x84 | Unsupported Protocol Version | CONNACK |
| 133 | 0x85 | Client Identifier not valid | CONNACK |
| 134 | 0x86 | Bad User Name or Password | CONNACK |
| 135 | 0x87 | Not authorized | CONNACK, PUBACK, PUBREC, SUBACK, UNSUBACK, DISCONNECT |
| 136 | 0x88 | Server unavailable | CONNACK |
| 137 | 0x89 | Server busy | CONNACK, DISCONNECT |
| 138 | 0x8A | Banned | CONNACK |
| 139 | 0x8B | Server shutting down | DISCONNECT |
| 140 | 0x8C | Bad authentication method | CONNACK, DISCONNECT |
| 141 | 0x8D | Keep Alive timeout | DISCONNECT |
| 142 | 0x8E | Session taken over | DISCONNECT |
| 143 | 0x8F | Topic Filter invalid | SUBACK, UNSUBACK, DISCONNECT |
| 144 | 0x90 | Topic Name invalid | CONNACK, PUBACK, PUBREC, DISCONNECT |
| 145 | 0x91 | Packet Identifier in use | PUBACK, PUBREC, SUBACK, UNSUBACK |
| 146 | 0x92 | Packet Identifier not found | PUBREL, PUBCOMP |
| 147 | 0x93 | Receive Maximum exceeded | DISCONNECT |
| 148 | 0x94 | Topic Alias invalid | DISCONNECT |
| 149 | 0x95 | Packet too large | CONNACK, DISCONNECT |
| 150 | 0x96 | Message rate too high | DISCONNECT |
| 151 | 0x97 | Quota exceeded | CONNACK, PUBACK, PUBREC, SUBACK, DISCONNECT |
| 152 | 0x98 | Administrative action | DISCONNECT |
| 153 | 0x99 | Payload format invalid | CONNACK, PUBACK, PUBREC, DISCONNECT |
| 154 | 0x9A | Retain not supported | CONNACK, DISCONNECT |
| 155 | 0x9B | QoS not supported | CONNACK, DISCONNECT |
| 156 | 0x9C | Use another server | CONNACK, DISCONNECT |
| 157 | 0x9D | Server moved | CONNACK, DISCONNECT |
| 158 | 0x9E | Shared Subscriptions not supported | SUBACK, DISCONNECT |
| 159 | 0x9F | Connection rate exceeded | CONNACK, DISCONNECT |
| 160 | 0xA0 | Maximum connect time | DISCONNECT |
| 161 | 0xA1 | Subscription Identifiers not supported | SUBACK, DISCONNECT |
| 162 | 0xA2 | Wildcard Subscriptions not supported | SUBACK, DISCONNECT |

---

## 4.5.4 Reason Code Categories

### 4.5.4.1 Success Codes (0x00-0x7F)

| Code | Meaning |
|------|---------|
| 0x00 | Operation successful |
| 0x01 | Granted QoS 1 (SUBACK only) |
| 0x02 | Granted QoS 2 (SUBACK only) |
| 0x04 | Disconnect with Will Message |
| 0x10 | No matching subscribers (informational) |
| 0x11 | No subscription existed (informational) |
| 0x18 | Continue authentication |
| 0x19 | Re-authenticate |

### 4.5.4.2 Connection Errors (0x80-0x8A)

| Code | Meaning | Action |
|------|---------|--------|
| 0x80 | Unspecified error | General failure |
| 0x81 | Malformed Packet | Parsing error |
| 0x82 | Protocol Error | State or data invalid |
| 0x83 | Implementation specific error | Vendor-specific |
| 0x84 | Unsupported Protocol Version | Wrong MQTT version |
| 0x85 | Client Identifier not valid | Bad client ID |
| 0x86 | Bad User Name or Password | Auth failed |
| 0x87 | Not authorized | Authz failed |
| 0x88 | Server unavailable | Try later |
| 0x89 | Server busy | Try later |
| 0x8A | Banned | Client banned |

### 4.5.4.3 Disconnect Codes (0x8B-0x8E)

| Code | Meaning |
|------|---------|
| 0x8B | Server shutting down |
| 0x8C | Bad authentication method |
| 0x8D | Keep Alive timeout |
| 0x8E | Session taken over |

### 4.5.4.4 Topic/Packet Errors (0x8F-0x94)

| Code | Meaning |
|------|---------|
| 0x8F | Topic Filter invalid |
| 0x90 | Topic Name invalid |
| 0x91 | Packet Identifier in use |
| 0x92 | Packet Identifier not found |
| 0x93 | Receive Maximum exceeded |
| 0x94 | Topic Alias invalid |

### 4.5.4.5 Limit Errors (0x95-0x99)

| Code | Meaning |
|------|---------|
| 0x95 | Packet too large |
| 0x96 | Message rate too high |
| 0x97 | Quota exceeded |
| 0x98 | Administrative action |
| 0x99 | Payload format invalid |

### 4.5.4.6 Feature Support Errors (0x9A-0x9F)

| Code | Meaning |
|------|---------|
| 0x9A | Retain not supported |
| 0x9B | QoS not supported |
| 0x9C | Use another server |
| 0x9D | Server moved |
| 0x9E | Shared Subscriptions not supported |
| 0x9F | Connection rate exceeded |

### 4.5.4.7 Subscription Errors (0xA0-0xA2)

| Code | Meaning |
|------|---------|
| 0xA0 | Maximum connect time |
| 0xA1 | Subscription Identifiers not supported |
| 0xA2 | Wildcard Subscriptions not supported |

---

## 4.5.5 Usage Guidelines

### 4.5.5.1 Reason Strings

When a Reason Code is included, a Reason String (Property 0x1F) MAY also be included to provide human-readable diagnostic information. Clients SHOULD NOT parse Reason Strings programmatically.

### 4.5.5.2 Omitting Reason Code

For some packets, if the Reason Code is 0x00 and there are no properties, the Reason Code and Property Length can be omitted to reduce packet size.

> **Note:** For Reason Code 0x91 (Packet Identifier in use), the response should either fix the state, reset the Session by connecting with Clean Start = 1, or investigate implementation defects.
