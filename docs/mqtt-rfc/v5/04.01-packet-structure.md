# Section 4.1: Packet Structure

> **Note:** MQTT 5.0 adds the **AUTH** packet type (15), allows **DISCONNECT** to be sent by both Client and Server, and adds a **Properties** section to the Variable Header of most packets.

> This section is part of [Section 4: Control Packet Format](./04.01-packet-structure.md).
> 
> - Next: [Section 4.2: Fixed Header](./04.02-fixed-header.md)

---

## 4.1.1 Structure of an MQTT Control Packet

The MQTT protocol operates by exchanging a series of MQTT Control Packets in a defined way. This section describes the format of these packets.

An MQTT Control Packet consists of up to three parts, always in the following order:

### Figure 4-1: MQTT Control Packet Structure

```
┌────────────────────────────────────────────────────┐
│              Fixed Header (Required)               │
│         Present in ALL Control Packets             │
├────────────────────────────────────────────────────┤
│            Variable Header (Conditional)           │
│        Present in SOME Control Packets             │
│         May include Properties in v5.0             │
├────────────────────────────────────────────────────┤
│               Payload (Conditional)                │
│        Present in SOME Control Packets             │
└────────────────────────────────────────────────────┘
```

## 4.1.2 Control Packet Types

MQTT 5.0 defines 15 Control Packet types:

### Table 4-1: Control Packet Types

| Name | Value | Direction | Description |
|------|-------|-----------|-------------|
| Reserved | 0 | Forbidden | Reserved |
| CONNECT | 1 | Client → Server | Connection request |
| CONNACK | 2 | Server → Client | Connect acknowledgment |
| PUBLISH | 3 | Both | Publish message |
| PUBACK | 4 | Both | QoS 1 publish acknowledgment |
| PUBREC | 5 | Both | QoS 2 publish received (part 1) |
| PUBREL | 6 | Both | QoS 2 publish release (part 2) |
| PUBCOMP | 7 | Both | QoS 2 publish complete (part 3) |
| SUBSCRIBE | 8 | Client → Server | Subscribe request |
| SUBACK | 9 | Server → Client | Subscribe acknowledgment |
| UNSUBSCRIBE | 10 | Client → Server | Unsubscribe request |
| UNSUBACK | 11 | Server → Client | Unsubscribe acknowledgment |
| PINGREQ | 12 | Client → Server | Ping request |
| PINGRESP | 13 | Server → Client | Ping response |
| DISCONNECT | 14 | **Both** | Disconnect notification |
| AUTH | 15 | **Both** | Authentication exchange |

> **Note:** In MQTT 5.0, DISCONNECT can be sent by both Client and Server (new), and AUTH is a new packet type for enhanced authentication.

## 4.1.3 Packet Components Summary

### Table 4-2: Control Packet Components

| Packet | Variable Header | Properties | Payload |
|--------|-----------------|------------|---------|
| CONNECT | Yes | Yes | Required |
| CONNACK | Yes | Yes | None |
| PUBLISH | Yes | Yes | Optional |
| PUBACK | Yes | Yes | None |
| PUBREC | Yes | Yes | None |
| PUBREL | Yes | Yes | None |
| PUBCOMP | Yes | Yes | None |
| SUBSCRIBE | Yes | Yes | Required |
| SUBACK | Yes | Yes | Required |
| UNSUBSCRIBE | Yes | Yes | Required |
| UNSUBACK | Yes | Yes | Required |
| PINGREQ | None | None | None |
| PINGRESP | None | None | None |
| DISCONNECT | Yes | Yes | None |
| AUTH | Yes | Yes | None |

## 4.1.4 Navigation

- [Fixed Header](./04.02-fixed-header.md) - Byte 1 and Remaining Length
- [Variable Header and Packet Identifier](./04.03-variable-header.md) - Variable header structure
- [Properties](./04.04-properties.md) - Property system (new in v5.0)
- [Reason Codes](./04.05-reason-codes.md) - Status and error codes (new in v5.0)
