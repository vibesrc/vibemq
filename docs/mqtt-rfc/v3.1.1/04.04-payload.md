# Section 4.4: Payload

> This section is part of [Section 4: Control Packet Format](./04.01-packet-structure.md).
> 
> - Previous: [Section 4.3: Variable Header](./04.03-variable-header.md)
> - Up: [Section 4: Control Packet Format](./04.01-packet-structure.md)

---

## 4.4.1 Overview

Some MQTT Control Packets contain a payload as the final part of the packet. In the case of the PUBLISH packet, this is the Application Message.

## 4.4.2 Payload Requirements by Packet Type

### Table 4-8: Control Packets and Payloads

| Control Packet | Payload |
|----------------|---------|
| CONNECT | Required |
| CONNACK | None |
| PUBLISH | Optional |
| PUBACK | None |
| PUBREC | None |
| PUBREL | None |
| PUBCOMP | None |
| SUBSCRIBE | Required |
| SUBACK | Required |
| UNSUBSCRIBE | Required |
| UNSUBACK | None |
| PINGREQ | None |
| PINGRESP | None |
| DISCONNECT | None |

## 4.4.3 Payload Contents

### 4.4.3.1 CONNECT Payload

The payload contains one or more length-prefixed fields:

1. **Client Identifier** (Required)
2. **Will Topic** (If Will Flag is set)
3. **Will Message** (If Will Flag is set)
4. **User Name** (If User Name Flag is set)
5. **Password** (If Password Flag is set)

See [Section 5.1: CONNECT](./05.01-connect.md#513-payload) for details.

### 4.4.3.2 PUBLISH Payload

The payload contains the Application Message being published. The content and format is application-specific. The length is calculated by subtracting the variable header length from the Remaining Length.

It is valid for a PUBLISH Packet to contain a zero-length payload.

### 4.4.3.3 SUBSCRIBE Payload

The payload contains a list of Topic Filters with associated Requested QoS levels:

```
┌─────────────────────────────────────────┐
│     Topic Filter 1 (UTF-8 String)       │
├─────────────────────────────────────────┤
│     Requested QoS 1 (1 byte)            │
├─────────────────────────────────────────┤
│     Topic Filter 2 (UTF-8 String)       │
├─────────────────────────────────────────┤
│     Requested QoS 2 (1 byte)            │
├─────────────────────────────────────────┤
│              ... more pairs             │
└─────────────────────────────────────────┘
```

See [Section 5.5: SUBSCRIBE](./05.05-subscribe.md) for details.

### 4.4.3.4 SUBACK Payload

The payload contains a list of return codes corresponding to each Topic Filter in the SUBSCRIBE request:

```
┌─────────────────────────────────────────┐
│     Return Code 1 (1 byte)              │
├─────────────────────────────────────────┤
│     Return Code 2 (1 byte)              │
├─────────────────────────────────────────┤
│              ... more codes             │
└─────────────────────────────────────────┘
```

### 4.4.3.5 UNSUBSCRIBE Payload

The payload contains a list of Topic Filters to unsubscribe from:

```
┌─────────────────────────────────────────┐
│     Topic Filter 1 (UTF-8 String)       │
├─────────────────────────────────────────┤
│     Topic Filter 2 (UTF-8 String)       │
├─────────────────────────────────────────┤
│              ... more filters           │
└─────────────────────────────────────────┘
```

## 4.4.4 Calculating Payload Length

The payload length is not explicitly encoded. It is calculated as:

```
Payload Length = Remaining Length - Variable Header Length
```

For packets with variable-length variable headers (like PUBLISH), the implementation must parse the variable header to determine where the payload begins.
